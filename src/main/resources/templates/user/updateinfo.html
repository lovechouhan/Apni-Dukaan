<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
 xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
 layout:decorate="~{base}">
<head>
   
    <title>Update User Information</title>
</head>
<body>
        <div layout:fragment="content" class="min-h-screen overflow-auto">
              <a th:href="@{/user/settings/account}" class="inline-flex items-center bg-red-800 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">
            <i class="fas fa-arrow-left mr-2"></i>Back
        </a>
            <div class="max-w-3xl mx-auto py-8 px-4">
                <h1 class="text-2xl font-bold mb-6">Update your information</h1>

                <form th:action="@{/user/profile/updateInfo/save}" th:object="${userinfo}" method="post" enctype="multipart/form-data" class="space-y-6 bg-white p-6 rounded shadow">
                   
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Name</label>
                        <input th:field="*{name}" type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                        <small class="text-red-600" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></small>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">Email</label>
                        <input th:field="*{email}" type="email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                        <small class="text-red-600" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></small>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">Phone</label>
                        <input th:field="*{phoneNumber}" type="tel" pattern="^[0-9]{10}$" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                        <small class="text-red-600" th:if="${#fields.hasErrors('phoneNumber')}" th:errors="*{phoneNumber}"></small>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Profile Picture </label>
                        <input name="profilePic" type="file" accept="image/*" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                        <small class="text-red-600" th:if="${#fields.hasErrors('profilePic')}" th:errors="*{profilePic}"></small>
                        <div th:if="${profileImageUrl != null and !#strings.isEmpty(profileImageUrl)}">
                            <img th:src="${profileImageUrl}" alt="Current Profile Picture" class="mt-2 h-20 w-20 rounded-full object-cover border">
                        </div>
                    </div>

                    <div class="flex gap-3">
                        <a th:href="@{/profile/user}" class="px-4 py-2 rounded bg-gray-200 text-gray-800">Cancel</a>
                        <button type="submit" class="px-4 py-2 rounded bg-red-700 text-white hover:bg-red-800">Save changes</button>
                    </div>
                </form>
            </div>
        </div>

</body>
</html>